pipeline {
    agent any
     environment {
        KUBECONFIG = "${env.USERPROFILE}\\.kube\\config"
        KUBECTL_CONTEXT = 'minikube'
        MINIKUBE_HOME = "C:\\Users\\prasad"
    }

    stages {
        stage('Check Helm') {
            steps {
                script {
                    sh '''
                        set +x
                        helm version
                        helmfile version
                        minikube update-context
                        minikube status
                        pwd
                        ls -ltrh
                        cd root-constraint
                        helmfile sync
                        sleep 10
                        kubectl get pods -n gk-test -l app.kubernetes.io/instance=good-pod-release
                    '''
                }
            }
        }
    }
}

